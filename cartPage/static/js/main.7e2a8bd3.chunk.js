(this["webpackJsonpshopping-cart"]=this["webpackJsonpshopping-cart"]||[]).push([[0],{271:function(t,e){},332:function(t,e,n){},350:function(t,e,n){},364:function(t,e,n){"use strict";n.r(e);var c=n(50),r=n.n(c),a=(n(332),n(216)),i=n(23),s=n(25),o=n.n(s),l=n(46),u=n(129),d=n.n(u);d.a.interceptors.request.use(function(){var t=Object(l.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){console.warn(t)})),d.a.interceptors.response.use((function(t){return console.log(t.status),t.data}),(function(t){throw t}));var j=d.a,f={namespace:"products",state:{productsList:[]},effects:{fetchData:o.a.mark((function t(e,n){var c,r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.payload,c=n.call,r=n.put,t.next=4,new Promise((function(t){setTimeout(t,1500)}));case 4:return t.next=6,c((function(){return j.get("./data/products.json")}));case 6:return a=t.sent,t.next=9,r({type:"save",payload:a});case 9:case"end":return t.stop()}}),t)})),sortList:o.a.mark((function t(e,n){var c,r,a,i,s,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.payload,r=n.call,a=n.put,t.next=4,new Promise((function(t){setTimeout(t,400)}));case 4:return t.next=6,r((function(){return j.get("./data/products.json")}));case 6:if(i=t.sent,s=[],"size"!==c.type||"ALL"!==c.key){t.next=13;break}return t.next=11,a({type:"save",payload:i});case 11:t.next=16;break;case 13:return s=null===i||void 0===i||null===(l=i.productsList)||void 0===l?void 0:l.filter((function(t){return t.availableSizes.find((function(t){return t===c.key}))})),t.next=16,a({type:"save",payload:{productsList:s}});case 16:case"end":return t.stop()}}),t)}))},reducers:{save:function(t,e){var n=e.payload;return Object(i.a)(Object(i.a)({},t),n)},sortByPrice:function(t,e){var n=e.payload,c=Object(a.a)(t.productsList);return"up"===n.key?c.sort((function(t,e){return t.price-e.price})):c.sort((function(t,e){return e.price-t.price})),Object(i.a)(Object(i.a)({},t),{},{productsList:c})}}},p={namespace:"cart",state:{cartsList:[],totalMoney:0},effects:{},reducers:{getData:function(t,e){e.payload;return localStorage.getItem("cart")?{cartsList:JSON.parse(localStorage.getItem("cart"))}:{cartsList:[]}},add:function(t,e){var n=e.payload,c=Object(i.a)(Object(i.a)({},n.item),{},{size:n.size,select:!1}),r=t.cartsList,a=t.cartsList.findIndex((function(t){return t.id===c.id&&t.size===c.size}));a>-1?r[a].num++:(c=Object(i.a)(Object(i.a)({},c),{},{num:1}),r.push(c));var s=JSON.stringify(r);return localStorage.setItem("cart",s),Object(i.a)(Object(i.a)({},t),{},{cartsList:r})},changeNum:function(t,e){var n=e.payload,c=t.cartsList,r=t.cartsList.findIndex((function(t){return t.id===n.id&&t.size===n.size}));c.splice(r,1,n),n.num<=0&&c.splice(r,1);var a=JSON.stringify(c);return localStorage.setItem("cart",a),Object(i.a)(Object(i.a)({},t),{},{cartsList:c})},updateList:function(t,e){var n=e.payload,c=t.cartsList,r=t.cartsList.findIndex((function(t){return t.id===n.id&&t.size===n.size}));c.splice(r,1,n);var a=JSON.stringify(c);return localStorage.setItem("cart",a),Object(i.a)(Object(i.a)({},t),{},{cartsList:c})},getTotalMoney:function(t,e){e.payload;var n=t.cartsList,c=0;return n.filter((function(t){return!0===t.select})).map((function(t){c=t.price*t.num+c})),Object(i.a)(Object(i.a)({},t),{},{totalMoney:c})},chooseAll:function(t,e){for(var n=e.payload,c=t.cartsList,r=0;r<c.length;r++)c[r].select=n;return Object(i.a)(Object(i.a)({},t),{},{cartsList:c})},delete:function(t,e){e.payload;var n=t.cartsList.filter((function(t){return!1===t.select}));if(0===n.length)localStorage.removeItem("cart");else{var c=JSON.stringify(n);localStorage.setItem("cart",c)}return Object(i.a)(Object(i.a)({},t),{},{cartsList:n})},goToPay:function(t,e){e.payload;return Object(i.a)(Object(i.a)({},t),{},{cartsList:[]})}}},b=n(219),h=r()();h.use(Object(b.a)()),h.model(f),h.model(p),h.router(n(365).default),h.start("#root")},365:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n(130),a=n(25),i=n.n(a),s=n(46),o=n(42),l=n(50),u=n(367),d=n(373),j=n(83),f=n(374),p=n(62),b=n(372),h=n(368),O=n(376),x=n(377),y=n(369),v=(n(350),n(7)),m=Object(l.connect)((function(t){t.products;return{cartsList:t.cart.cartsList}}))((function(t){var e=t.item,n=(t.cartsList,t.dispatch),c=function(t){return t.length>25?"".concat(t.substr(0,25),"..."):t},r=Object(v.jsx)(d.a,{children:null===e||void 0===e?void 0:e.availableSizes.map((function(t,c){return Object(v.jsx)(d.a.Item,{onClick:function(){n({type:"cart/add",payload:{item:e,size:t}})},children:Object(v.jsx)("span",{children:t})},c)}))});return Object(v.jsxs)(y.a,{style:{width:240,margin:"10px 30px"},bodyStyle:{padding:0},children:[Object(v.jsx)("div",{className:"custom-image",children:Object(v.jsx)("img",{alt:"example",style:{width:"80%"},src:"./data/img/products/".concat(e.sku,"_1.jpg")})}),Object(v.jsxs)("div",{className:"custom-card",children:[Object(v.jsx)("h4",{style:{overflow:"hide",width:"100%"},children:c(e.title)}),Object(v.jsx)("p",{children:c(e.style)||"--"}),Object(v.jsx)("h2",{children:"$"+e.price.toFixed(2)}),Object(v.jsx)(f.a,{overlay:r,trigger:"click",placement:"topRight",children:Object(v.jsx)(p.a,{style:{width:"100%",backgroundColor:"#fc5c01",border:"none",color:"#fff"},children:"Add to Cart"})})]})]})})),g=n(370),L=n(371),w=n(375),k=n(215),S=n(220),C=Object(l.connect)((function(t){t.products;return{cart:t.cart}}))((function(t){var e,n,r=t.openCart,a=t.setOpenCart,l=t.cart,d=t.dispatch,j=(u.a.Footer,Object(c.useState)(!1)),f=Object(o.a)(j,2),p=(f[0],f[1],Object(c.useState)(!1)),b=Object(o.a)(p,2),h=b[0],O=b[1],x=Object(c.useState)(!1),y=Object(o.a)(x,2),m=y[0],C=y[1],z=Object(c.useState)(0),I=Object(o.a)(z,2),D=I[0],N=I[1];Object(c.useEffect)((function(){A().then((function(t){return J()}))}),[]);var A=function(){var t=Object(s.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d({type:"cart/getData"});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),J=function(){var t=null===l||void 0===l?void 0:l.cartsList,e=0;t.filter((function(t){return!0===t.select})).map((function(t){e=t.price*t.num+e})),N(e)},P=function(t,e){t.select=e,F(t).then((function(t){return J()}))},F=function(){var t=Object(s.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d({type:"cart/updateList",payload:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=function(t){d({type:"cart/chooseAll",payload:t}),J(),O(t)},R=function(t,e){var n;return Object(v.jsxs)("div",{className:"cardItem",children:[(null===t||void 0===t?void 0:t.select)?Object(v.jsx)(S.a,{style:{color:"#fc5c01",fontSize:18},onClick:function(){return P(t,!1)}}):Object(v.jsx)(S.a,{style:{color:"#D3D3D3",fontSize:18},onClick:function(){return P(t,!0)}}),Object(v.jsx)("img",{src:"./data/img/products/".concat(t.sku,"_1.jpg"),className:"cartImg"}),Object(v.jsxs)("div",{style:{marginLeft:25},children:[Object(v.jsx)("h5",{children:t.title}),Object(v.jsx)("label",{children:t.size}),Object(v.jsxs)("div",{style:{flexDirection:"row",display:"flex",alignItems:"flex-end"},children:[Object(v.jsx)("label",{style:{fontWeight:"bold",color:"#ff2501",fontSize:18,marginRight:10},children:"$"+(null===t||void 0===t||null===(n=t.price)||void 0===n?void 0:n.toFixed(2))}),Object(v.jsx)(g.a,{value:t.num,style:{width:50,height:30},onChange:function(e){t.num=parseInt(e),d({type:"cart/changeNum",payload:t}),J()}})]})]})]},e)};return Object(v.jsx)(L.a,{closable:!0,maskClosable:!0,mask:!0,visible:r,onClose:function(){a(!1)},width:"375",height:"100%",children:Object(v.jsxs)("div",{style:{height:"100px"},children:[Object(v.jsxs)("div",{style:{flexDirection:"row",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(v.jsx)("h1",{children:"\u8d2d\u7269\u8f66"}),Object(v.jsx)("a",{onClick:function(){return C(!m)},style:{marginRight:20,textDecoration:"none",color:"#333"},children:m?"\u5b8c\u6210":"\u7ba1\u7406"})]}),null===l||void 0===l||null===(e=l.cartsList)||void 0===e?void 0:e.map((function(t,e){return Object(v.jsx)("div",{style:{overflow:"scroll",paddingBottom:60,marginTop:10},children:R(t,e)})})),Object(v.jsxs)("div",{className:"cartConfig",children:[Object(v.jsxs)("div",{style:{display:"flex"},children:[h?Object(v.jsx)(S.a,{style:{color:"#fc5c01",fontSize:18},onClick:function(){return M(!1)}}):Object(v.jsx)(S.a,{style:{color:"#D3D3D3",fontSize:18},onClick:function(){return M(!0)}}),Object(v.jsx)("label",{style:{marginLeft:10,color:"#333"},children:"\u5168\u9009"})]}),Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(v.jsxs)("label",{style:{color:"#333"},children:["\u5408\u8ba1\uff1a",Object(v.jsx)("label",{style:{color:"#ff2501"},children:"$"+(null===D||void 0===D?void 0:D.toFixed(2))})]}),m?Object(v.jsx)(w.a,{onConfirm:function(){if(!D>0)return k.b.info("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u9879\uff01");d({type:"cart/delete"}),k.b.info("\u5220\u9664\u6210\u529f"),O(!1),N(0)},title:"\u786e\u5b9a\u8981\u5220\u9664\uff1f",children:Object(v.jsx)("a",{className:"deleteCart",children:"\u5220\u9664"})}):Object(v.jsx)(w.a,{onConfirm:function(){if(!D>0)return k.b.info("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u9879\uff01");d({type:"cart/delete"}),k.b.info("\u606d\u559c\u4f60\uff0c\u5b9d\u8d1d\u7ed3\u7b97\u6210\u529f\uff01"),O(!1),N(0)},title:"\u524d\u5f80\u7ed3\u7b97\uff1f",children:Object(v.jsx)("a",{className:(null===l||void 0===l||null===(n=l.cartsList)||void 0===n?void 0:n.length)>0?"goPay":"goPayNo",children:"\u7ed3\u7b97"})})]})]})]})})})),z=Object(l.connect)((function(t){var e=t.loading,n=t.products,c=t.cart;return{productsList:n.productsList,cart:c,loading:e.effects["data/getData"]}}))((function(t){var e=t.dispatch,n=t.productsList,r=(t.loading,t.cart),a=u.a.Header,l=(u.a.Footer,u.a.Sider,u.a.Content,Object(c.useState)("ALL")),y=Object(o.a)(l,2),g=y[0],L=y[1],w=Object(c.useState)(!1),k=Object(o.a)(w,2),S=k[0],z=k[1],I=Object(c.useState)(!0),D=Object(o.a)(I,2),N=D[0],A=D[1],J=Object(c.useState)(void 0),P=Object(o.a)(J,2),F=P[0],M=P[1];Object(c.useEffect)((function(){R().then()}),[]);var R=function(){var t=Object(s.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({type:"products/fetchData"});case 2:A(!1);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({type:"products/sortByPrice",payload:{type:"price",key:n}});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),X=function(){return Object(v.jsxs)(d.a,{children:[Object(v.jsx)(d.a.Item,{onClick:function(){M("up"),T("up")},children:"up"}),Object(v.jsx)(d.a.Item,{onClick:function(){M("down"),T("down")},children:"down"})]})};return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(u.a,{children:[Object(v.jsx)(a,{children:Object(v.jsx)("h1",{style:{color:"#fff",textAlign:"center",height:"50px"},children:"Shopping street"})}),Object(v.jsx)(C,{openCart:S,setOpenCart:z}),function(){var t;return Object(v.jsx)("div",{style:{position:"fixed",right:30,zIndex:100,top:"250px"},children:Object(v.jsx)(b.a,{count:null===r||void 0===r||null===(t=r.cartsList)||void 0===t?void 0:t.length,children:Object(v.jsx)(x.a,{style:{fontSize:"48px",color:"#fc5c01"},onClick:function(){z(!0)}})})})}(),Object(v.jsxs)("div",{style:{flexDirection:"column",alignItems:"center",display:"flex"},children:[Object(v.jsxs)(j.a,{type:"flex",justify:"center",align:"middle",children:[Object(v.jsx)(f.a,{overlay:X,trigger:"click",children:Object(v.jsxs)(p.a,{size:"large",style:{height:36},children:[F||"price",Object(v.jsx)(O.a,{})]})}),["ALL","XS","S","M","ML","L","XL","XXL"].map((function(t,n){return Object(v.jsx)("a",{className:g===t?"size-button-select":"size-button-unselect",onClick:Object(s.a)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return A(!0),L(t),n.next=4,e({type:"products/sortList",payload:{type:"size",key:t}});case 4:T(F),A(!1);case 6:case"end":return n.stop()}}),n)}))),children:t},n)}))]}),N?Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)(h.a,{})}):Object(v.jsx)("div",{style:{width:"100%",flexWrap:"wrap",flexDirection:"row",display:"flex",maxWidth:"1200px",justifyContent:"center"},children:null===n||void 0===n?void 0:n.map((function(t,e){return Object(v.jsx)(m,{item:t})}))})]})]})})}));e.default=function(t){var e=t.history;return Object(v.jsx)(r.Router,{history:e,children:Object(v.jsx)(r.Switch,{children:Object(v.jsx)(r.Route,{path:"/",exact:!0,component:z})})})}}},[[364,1,2]]]);
//# sourceMappingURL=main.7e2a8bd3.chunk.js.map
